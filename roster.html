<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gotham FC Team Roster</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Saira+Semi+Condensed:wght@600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/custom-styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gotham: { black: '#000000', dark: '#0a0a0a', cyan: '#22d3ee' }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-black text-gray-200 antialiased selection:bg-cyan-400 selection:text-black">

    <!-- Fixed Glass Navigation (Reusable) -->
    <nav class="fixed w-full z-50 glass-nav transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <a href="./index.html" class="flex-shrink-0 flex items-center gap-3 group cursor-pointer">
                    <svg class="h-10 w-10 text-white group-hover:text-gotham-cyan transition-colors"
                        viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 0L95.11 25V75L50 100L4.89 75V25L50 0Z" fill="currentColor" />
                        <path d="M50 10L86.6 30V70L50 90L13.4 70V30L50 10Z" fill="#000000" />
                        <text x="50" y="62" font-family="Saira Semi Condensed, sans-serif" font-size="30"
                            font-weight="800" fill="currentColor" text-anchor="middle">GFC</text>
                    </svg>
                    <span
                        class="font-heading font-bold text-2xl tracking-wide text-white group-hover:text-gotham-cyan transition-colors">FAN
                        HUB</span>
                </a>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="./index.html" class="nav-link text-sm tracking-widest uppercase">Home</a>
                        <a href="#" class="nav-link active text-sm tracking-widest uppercase">Roster</a>
                        <a href="./stats.html" class="nav-link text-sm tracking-widest uppercase">Stats</a>
                        <a href="https://www.gothamfc.com/tickets" target="_blank" class="btn-primary text-xs ml-4">Get
                            Tickets</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="relative pt-32 pb-12 px-4 text-center overflow-hidden">
        <div class="relative z-10">
            <h1 class="text-5xl md:text-7xl font-black text-white mb-4 animate-scroll slide-in">THE SQUAD</h1>
            <p class="text-gotham-cyan text-lg font-heading tracking-widest uppercase mb-8">2025 Season Roster</p>

            <!-- Filters -->
            <div class="flex flex-wrap justify-center gap-4" id="roster-filters">
                <button class="filter-btn btn-primary" data-filter="all">All</button>
                <button class="filter-btn btn-outline" data-filter="FW">Forwards</button>
                <button class="filter-btn btn-outline" data-filter="MF">Midfielders</button>
                <button class="filter-btn btn-outline" data-filter="DF">Defenders</button>
                <button class="filter-btn btn-outline" data-filter="GK">Goalkeepers</button>
            </div>
        </div>
        <div class="absolute inset-0 bg-gradient-to-b from-gotham-cyan/5 to-transparent pointer-events-none"></div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 pb-20" id="roster-container">
        <div class="text-center py-20">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gotham-cyan"></div>
            <p class="mt-4 text-gray-500">Retrieving player data...</p>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const rosterContainer = document.getElementById('roster-container');
            const filterBtns = document.querySelectorAll('.filter-btn');
            let currentRoster = [];

            // Filter Logic
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update Active State
                    filterBtns.forEach(b => {
                        b.classList.remove('btn-primary');
                        b.classList.add('btn-outline');
                    });
                    btn.classList.remove('btn-outline');
                    btn.classList.add('btn-primary');

                    const filter = btn.dataset.filter;
                    renderRoster(currentRoster, filter);
                });
            });

            function renderRoster(roster, filter = 'all') {
                if (!roster || roster.length === 0) {
                    rosterContainer.innerHTML = `<p class="text-center text-red-400">Roster data unavailable.</p>`;
                    return;
                }

                const filteredRoster = filter === 'all'
                    ? roster
                    : roster.filter(p => p.pos === filter);

                if (filteredRoster.length === 0) {
                    rosterContainer.innerHTML = `<p class="text-center text-gray-400 py-12">No players found for this position.</p>`;
                    return;
                }

                // Sort by Number
                filteredRoster.sort((a, b) => (parseInt(a.num) || 99) - (parseInt(b.num) || 99));

                let html = `<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">`;

                filteredRoster.forEach((player, index) => {
                    const placeholderText = player.name.split(' ').map(n => n[0]).join('');
                    const imageUrl = player.headshot || `https://placehold.co/400x500/111/444?text=${placeholderText}`;

                    html += `
                        <div class="card-modern relative group fade-in-up" style="animation-delay: ${index * 50}ms">
                            <!-- Image Container -->
                            <div class="aspect-[4/5] overflow-hidden bg-gray-900 relative">
                                <img src="${imageUrl}" 
                                     alt="${player.name}"
                                     class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                                     onerror="this.src='https://placehold.co/400x500/111/444?text=${placeholderText}'">
                                <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
                                
                                <span class="absolute top-4 left-4 font-black text-4xl text-white/10 group-hover:text-gotham-cyan/20 transition-colors">
                                    ${player.num}
                                </span>
                            </div>

                            <!-- Content -->
                            <div class="absolute bottom-0 w-full p-6">
                                <div class="flex justify-between items-end mb-1">
                                    <h3 class="text-xl font-bold text-white leading-none uppercase">${player.name}</h3>
                                    <span class="text-gotham-cyan font-bold text-sm tracking-wider">${player.pos}</span>
                                </div>
                                <div class="h-0 group-hover:h-auto overflow-hidden transition-all duration-300">
                                    <p class="text-gray-400 text-xs mt-2 line-clamp-2 opacity-0 group-hover:opacity-100 transition-opacity delay-100 duration-300">
                                        ${player.bio || 'Gotham FC Player'}
                                    </p>
                                    ${player.pageUrl ? `
                                        <a href="${player.pageUrl}" target="_blank" class="inline-block mt-3 text-xs text-white border-b border-gotham-cyan hover:text-gotham-cyan">View Profile &rarr;</a>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                });

                html += `</div>`;
                rosterContainer.innerHTML = html;
            }

            async function fetchAndDisplayRoster() {
                try {
                    const response = await fetch('./.netlify/functions/get-gotham-data');
                    if (response.ok) {
                        const data = await response.json();
                        currentRoster = data.roster;
                        renderRoster(currentRoster);
                    } else {
                        throw new Error('API Error');
                    }
                } catch (error) {
                    console.error(error);
                    // Mock Data for Fallback Preview
                    currentRoster = [
                        { name: 'Lynn Williams', num: '10', pos: 'FW', bio: 'USWNT legend and goal scorer.', headshot: 'https://images.unsplash.com/photo-1544698310-74ea9d188c1b?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Crystal Dunn', num: '19', pos: 'MF', bio: 'Versatile playmaker.', headshot: 'https://images.unsplash.com/photo-1577416412292-76188f30d07e?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Kelley O\'Hara', num: '5', pos: 'DF', bio: 'Champion mentality.', headshot: 'https://images.unsplash.com/photo-1628891435252-c247ae2e8587?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Ann-Katrin Berger', num: '30', pos: 'GK', bio: 'Olympic Hero.', headshot: 'https://images.unsplash.com/photo-1628891892233-080c59235069?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Tierna Davidson', num: '2', pos: 'DF', bio: 'Solid defensive anchor.', headshot: '' },
                    ];
                    renderRoster(currentRoster);
                }
            }

            fetchAndDisplayRoster();
        });
    </script>
</body>

</html>
