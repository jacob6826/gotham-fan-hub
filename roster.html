<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gotham FC Team Roster</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Saira+Semi+Condensed:wght@600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/custom-styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gotham: { black: '#000000', dark: '#0a0a0a', cyan: '#22d3ee' }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-black text-gray-200 antialiased selection:bg-cyan-400 selection:text-black">

    <!-- Fixed Glass Navigation (Reusable) -->
    <nav class="fixed w-full z-50 glass-nav transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <a href="./index.html" class="flex-shrink-0 flex items-center gap-3 group cursor-pointer">
                    <svg class="h-10 w-10 text-white group-hover:text-gotham-cyan transition-colors"
                        viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 0L95.11 25V75L50 100L4.89 75V25L50 0Z" fill="currentColor" />
                        <path d="M50 10L86.6 30V70L50 90L13.4 70V30L50 10Z" fill="#000000" />
                        <text x="50" y="62" font-family="Saira Semi Condensed, sans-serif" font-size="30"
                            font-weight="800" fill="currentColor" text-anchor="middle">GFC</text>
                    </svg>
                    <span
                        class="font-heading font-bold text-2xl tracking-wide text-white group-hover:text-gotham-cyan transition-colors">FAN
                        HUB</span>
                </a>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="./index.html" class="nav-link text-sm tracking-widest uppercase">Home</a>
                        <a href="#" class="nav-link active text-sm tracking-widest uppercase">Roster</a>
                        <a href="./stats.html" class="nav-link text-sm tracking-widest uppercase">Stats</a>
                        <a href="https://www.gothamfc.com/tickets" target="_blank" class="btn-primary text-xs ml-4">Get
                            Tickets</a>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button type="button" id="mobile-menu-btn" class="text-gray-400 hover:text-white p-2"
                        aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div class="hidden md:hidden bg-black/95 backdrop-blur-xl border-b border-gray-800 absolute w-full"
                id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="./index.html"
                        class="text-gray-300 block px-3 py-2 rounded-md text-base font-medium uppercase tracking-widest hover:bg-gray-800 hover:text-gotham-cyan transition-colors">Home</a>
                    <a href="#"
                        class="text-white block px-3 py-2 rounded-md text-base font-bold uppercase tracking-widest hover:bg-gray-800 hover:text-gotham-cyan transition-colors">Roster</a>
                    <a href="./stats.html"
                        class="text-gray-300 block px-3 py-2 rounded-md text-base font-medium uppercase tracking-widest hover:bg-gray-800 hover:text-gotham-cyan transition-colors">Stats</a>
                    <a href="https://www.gothamfc.com/tickets" target="_blank"
                        class="text-black bg-gotham-cyan block px-3 py-2 rounded-md text-base font-bold uppercase tracking-widest hover:bg-cyan-300 transition-colors mt-4 text-center">Get
                        Tickets</a>
                </div>
            </div>
    </nav>

    <!-- Page Header -->
    <header class="relative pt-32 pb-12 px-4 text-center overflow-hidden">
        <div class="relative z-10">
            <h1 class="text-5xl md:text-7xl font-black text-white mb-4 animate-scroll slide-in">THE SQUAD</h1>
            <p class="text-gotham-cyan text-lg font-heading tracking-widest uppercase mb-8">2025 Season Roster</p>

            <!-- Filters -->
            <div class="flex flex-wrap justify-center gap-4" id="roster-filters">
                <button class="filter-btn btn-primary" data-filter="all">All</button>
                <button class="filter-btn btn-outline" data-filter="FW">Forwards</button>
                <button class="filter-btn btn-outline" data-filter="MF">Midfielders</button>
                <button class="filter-btn btn-outline" data-filter="DF">Defenders</button>
                <button class="filter-btn btn-outline" data-filter="GK">Goalkeepers</button>
            </div>
        </div>
        <div class="absolute inset-0 bg-gradient-to-b from-gotham-cyan/5 to-transparent pointer-events-none"></div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 pb-20" id="roster-container">
        <div class="text-center py-20">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gotham-cyan"></div>
            <p class="mt-4 text-gray-500">Retrieving player data...</p>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const rosterContainer = document.getElementById('roster-container');
            const filterBtns = document.querySelectorAll('.filter-btn');
            let currentRoster = [];

            // Filter Logic
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update Active State
                    filterBtns.forEach(b => {
                        b.classList.remove('btn-primary');
                        b.classList.add('btn-outline');
                    });
                    btn.classList.remove('btn-outline');
                    btn.classList.add('btn-primary');

                    const filter = btn.dataset.filter;
                    renderRoster(currentRoster, filter);
                });
            });

            function renderRoster(roster, filter = 'all') {
                if (!roster || roster.length === 0) {
                    rosterContainer.innerHTML = `<p class="text-center text-red-400">Roster data unavailable.</p>`;
                    return;
                }

                const filteredRoster = filter === 'all'
                    ? roster
                    : roster.filter(p => p.pos === filter);

                if (filteredRoster.length === 0) {
                    rosterContainer.innerHTML = `<p class="text-center text-gray-400 py-12">No players found for this position.</p>`;
                    return;
                }

                // Sort by Number
                filteredRoster.sort((a, b) => (parseInt(a.num) || 99) - (parseInt(b.num) || 99));

                let html = `<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">`;

                filteredRoster.forEach((player, index) => {
                    const placeholderText = player.name.split(' ').map(n => n[0]).join('');
                    const imageUrl = player.headshot || `https://placehold.co/400x500/111/444?text=${placeholderText}`;

                    html += `
                        <div class="card-modern group fade-in-up flex flex-col h-full bg-gotham-dark border border-gray-800" style="animation-delay: ${index * 50}ms">
                            <!-- Image Container (Top Half) -->
                            <div class="h-72 overflow-hidden bg-gray-900 relative border-b border-gray-800">
                                <img src="${imageUrl}" 
                                     alt="${player.name}"
                                     class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                                     onerror="this.src='https://placehold.co/400x500/111/444?text=${placeholderText}'">
                                <!-- Gradient overlay only at very bottom for smooth transition -->
                                <div class="absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-gotham-dark to-transparent"></div>
                            </div>

                            <!-- Content (Bottom Half) -->
                            <div class="p-6 flex-grow flex flex-col relative">
                                <!-- Big Number -->
                                <div class="absolute -top-8 right-4 bg-gotham-cyan text-black font-black text-2xl h-12 w-12 flex items-center justify-center rounded-lg shadow-lg transform group-hover:-translate-y-1 transition-transform">
                                    ${player.num}
                                </div>

                                <div class="mt-2 mb-4">
                                    <span class="text-gotham-cyan font-bold text-xs tracking-widest uppercase block mb-1">${player.pos}</span>
                                    <h3 class="text-2xl font-black text-white leading-none uppercase tracking-tight">${player.name}</h3>
                                </div>
                                
                                <p class="text-gray-400 text-sm line-clamp-3 mb-4 flex-grow">
                                    ${player.bio || 'Gotham FC Player'}
                                </p>

                                ${player.pageUrl ? `
                                    <a href="${player.pageUrl}" target="_blank" class="inline-flex items-center text-xs font-bold text-white uppercase tracking-wider hover:text-gotham-cyan transition-colors mt-auto">
                                        View Profile <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                                    </a>
                                ` : ''}
                            </div>
                        </div>
                    `;
                });

                html += `</div>`;
                rosterContainer.innerHTML = html;
            }

            async function fetchAndDisplayRoster() {
                try {
                    const response = await fetch('./.netlify/functions/get-gotham-data');
                    if (response.ok) {
                        const data = await response.json();
                        currentRoster = data.roster;
                        renderRoster(currentRoster);
                    } else {
                        throw new Error('API Error');
                    }
                } catch (error) {
                    console.error(error);
                    // Mock Data for Fallback Preview
                    currentRoster = [
                        { name: 'Lynn Williams', num: '10', pos: 'FW', bio: 'USWNT legend and goal scorer.', headshot: 'https://images.unsplash.com/photo-1544698310-74ea9d188c1b?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Crystal Dunn', num: '19', pos: 'MF', bio: 'Versatile playmaker.', headshot: 'https://images.unsplash.com/photo-1577416412292-76188f30d07e?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Kelley O\'Hara', num: '5', pos: 'DF', bio: 'Champion mentality.', headshot: 'https://images.unsplash.com/photo-1628891435252-c247ae2e8587?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Ann-Katrin Berger', num: '30', pos: 'GK', bio: 'Olympic Hero.', headshot: 'https://images.unsplash.com/photo-1628891892233-080c59235069?auto=format&fit=crop&q=80&w=400' },
                        { name: 'Tierna Davidson', num: '2', pos: 'DF', bio: 'Solid defensive anchor.', headshot: '' },
                    ];
                    renderRoster(currentRoster);
                }
            }

            fetchAndDisplayRoster();

            // Mobile Menu Toggle
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');

            if (btn && menu) {
                btn.addEventListener('click', () => {
                    menu.classList.toggle('hidden');
                });
            }
        });
    </script>
</body>

</html>
